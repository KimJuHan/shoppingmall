<% include ../header.ejs %>
<div class="row">
    <div class="col-md-4 col-md-offset-4">
        <%if(typeof flashMessage !=='undefined') {%>
            <div class="alert alert-danger" role="alert"><%=flashMessage%></div>
        <%}%>
        <div class="login-panel panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">로그인</h3>
            </div>
            <div class="panel-body">
                <form role="form" action="" id="login_form" method="post">
                    <fieldset>
                        <div class="form-group">
                            <input class="form-control" placeholder="ID" name="username" type="text" autofocus="" required="">
                        </div>
                        <div class="form-group">
                            <input class="form-control" placeholder="Password" name="password" type="password" value="" required="">
                        </div>
                        <!-- Change this to a button or input when using this as a form -->
                        <input type="submit" class="btn btn-lg btn-success btn-block" value="로그인">
                        <div style="margin-top: 10px">
                            <a href="/accounts/facebook" id="facebook_login" class="btn btn-lg btn-primary btn-block">
                                <i class="fa fa-facebook" aria-hidden="true"></i> 페이스북 로그인
                            </a>
                        </div>
                        </div>
                        <div style="margin-top: 10px">
                            <a id="kakao_login" href="/accounts/kakao" class="btn btn-lg btn-primary btn-block">
                                <img src="//mud-kage.kakao.com/14/dn/btqbjxsO6vP/KPiGpdnsubSq3a0PHEGUK1/o.jpg" style="width:300px;"/>
                            </a>
                        </div>
                        <div style="margin-top: 10px">
                            <a id="naver_login" href="/accounts/naver" class="btn btn-lg btn-primary btn-block">
                                <img src="../images/naverlogin.PNG" style="width:300px;"/>
                            </a>
                        </div>
                        <div>
                            <% if(nonUserOrder) {%>
                                <!-- 장바구니에서 넘어온 경우 -->
                                <a href="/cart/order?orderType=<%=nonUserOrder%>%nonUser">비회원으로 주문하기</a>
                            <%}%>
                            <% if(orderedProduct) {%>
                                <!-- 바로주문하기로 하는 경우 -->
                                <a href="/nonCartOrder?orderedProduct=<%=orderedProduct%>%nonUser">비회원으로 주문하기</a>
                            <%}%>
                        </div>
                    </fieldset>
                </form>
                <% if(nonUserCheckout) {%>
                    <form action="/myshop/checkout" method="POST">
                        <table class="table table-bordered">
                            <tr>
                                <th>이름</th>
                                <td><input type="" name="name" value=""></td>
                            </tr>
                            <tr>
                                <th>주문번호</th>
                                <td><input type="" name="orderNumber" value=""></td>
                            </tr>
                            <tr>
                                <th>주문조회 비밀번호</th>
                                <td><input type="" name="password" value=""></td>
                            </tr>
                        </table>
                        <p>비회원의 경우, 주문시의 주문번호로 주문이 가능합니다.</p>
                    </form>
                <%}%>
            </div>
        </div>
    </div>
</div>
<!-- kakao 로그인 api -->
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        window.addEventListener('message', function(e) {
            if (e.data !== 'popup-done') { return; }
            window.location.replace('/auth/popup-done');
	    });
    
        var loginWindow;
        var popupWindow = function(e){
            e.preventDefault();
            var url = $(this).attr('href');
            var width = 500;
            var height = 500;
            var w = window.outerWidth - width, h = window.outerHeight - height;
            var left = Math.round(window.screenX + (w / 2));
            var top = Math.round(window.screenY + (h / 2.5));

            loginWindow = window.open(url, 'LogIn', 
                'width='+width+',height='+height+',left='+left+',top='+top+
                ',toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0');
        }
        //카카오 팝업 로그인
        $('#kakao_login').on('click', popupWindow)

        //페북 팝업 로그인
        $('#facebook_login').on('click', popupWindow)

        //네이버 팝업 로그인
        $('#naver_login').on('click', popupWindow)
    })
</script>
<% include ../footer.ejs %>